<!DOCTYPE html>
<html>
<head>
  <title>CA Assistant Chat</title>
</head>
<body>
  <h1>Ask Your CA Assistant</h1>
  <form id="chatForm">
    <input type="text" name="name" placeholder="Your Name" required><br>
    <input type="email" name="email" placeholder="Your Email" required><br>
    <input type="text" name="mobile" placeholder="Mobile Number" required><br>
    <textarea name="question" placeholder="Enter your question" required></textarea><br>
    <button type="submit">Ask</button>
  </form>

  <div id="response"></div>

  <script>
    document.getElementById("chatForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const res = await fetch("/ask", { method: "POST", body: formData });

      if (!res.ok) {
        const text = await res.text();
        document.getElementById("response").innerText = "Error: " + text;
        return;
      }

      const data = await res.json();
      document.getElementById("response").innerText = data.answer || data.error;
    });
  </script>
</body>
</html>
